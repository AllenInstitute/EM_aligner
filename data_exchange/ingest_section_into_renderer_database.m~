function ingest_section_into_renderer_database(mL,rc_target, rc_base, dir_work)
% This is a high-level function that:
% Ingests the data into an existing collection, and
% Completes the collection
%
% Since collections are based off of other collections. In this case the base
% collection is specified in the rc_base struct
%
% Author: Khaled Khairy. Janelia Research Campus.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



%% translate to origin to be Renderer friendly
disp('translating to set in +ve space');
mL = translate_to_origin(mL);

%% export to MET (in preparation to be ingested into the Renderer database
fn = [dir_work '/X_A_' num2str(randi(1000000)) '.txt'];
if strcmp(class(mL.tiles(1).tform), 'images.geotrans.PolynomialTransformation2D')
    export_montage_MET2(mL, fn);
    v = 'v3';
else
    export_MET(mL, fn, 2, 2, 0);
    v = 'v1';
end

%% append tiles to existing collection
resp = append_renderer_stack(rc_target, rc_base, fn, v);

try delete(fn); catch err_delete, kk_disp_err(err_delete);end



%% cleanup
try
    delete(fn_MET);
catch err_delete_file
    kk_disp_err(err_delete_file);
end