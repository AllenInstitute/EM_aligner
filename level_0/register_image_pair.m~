function [T, B] = register_image_pair(im2,im1)

B = [];
T = [];
method = 'SURF';%'MSER_SURF';%'SURF';%'SURF'; %'BRISK' 'HARRIS' 'FAST''FAST_SURF';%
opt.SURF_NumOctaves = ;
opt.SURF_NumScaleLevels = 6;
opt.SURF_MetricThreshold = 3000;

[f1, vp1] = im_get_features(im1,method, opt);
[f2, vp2] = im_get_features(im2,method, opt);

[m12_1, m12_2, tf12] = im_pair_match_features(f1, vp1, f2, vp2);
warning off;
thresh = 2;
maxIm = 255;
if ~isempty(m12_1) && ~isempty(m12_2)
    T = fitgeotrans([m12_1.Location],[m12_2.Location],'affine');
    B = imwarp(im1, T,'FillValues', maxIm, 'OutputView',  imref2d(size(im2)));
    %B = imwarp(im2, T,'FillValues', maxIm);
    
    %%%%%%%%% sosi
    figure; showMatchedFeatures(im2, im1, m12_2, m12_1, 'montage');

end